<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>
	
  	QCon 2018 Shanghai - Frontend Practice in Ant Financial - IMLC.ME
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="IMLC.ME" type="application/atom+xml">
	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>

	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	#projects-nav {margin-left: 10px;}
	#projects-nav li {
		list-style: none;
	}

	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}

	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}
	</style>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
				 
				 	<div class="profilepic">
						<img src="/asset/icon.jpg" style="width:160px;">
					</div>
            	

					<h1><a href="index.html">IMLC.ME</a></h1>
					<p class="subtitle"></p>
					<nav id="main-nav">
						<ul class="main">
						
						  <li id=""><a target="self" href="index.html">Home</a></li>
						
						  <li id=""><a target="_self" href="archives.html">Archives</a></li>
						
						</ul>
					</nav>

					<nav>
						My Projects
						<ul id="projects-nav">

						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">










<a target="_blank" class="github" target="_blank" href="https://github.com/lawrenceching" title="GitHub">GitHub</a>




								<a class="rss" href="atom.xml" title="RSS">RSS</a>

						</div>
					</nav>
				</header>
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
 <div id="content" class="inner">

	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
		<h1 class="title" itemprop="name">QCon 2018 Shanghai - Frontend Practice in Ant Financial</h1>
		<div class="entry-content" itemprop="articleBody">
			<blockquote>
<p>This presentation is shared by <a href="https://2018.qconshanghai.com/presentation/817">QCon‰∏äÊµ∑2018|ÂÖ®ÁêÉËΩØ‰ª∂ÂºÄÂèëÂ§ß‰ºö</a><br/><br/>
You can download the PPT from <a href="http://ppt.geekbang.org/slide/download?cid=33&amp;pid=1816">Â§ß‰ºöÊºîËÆ≤PPTÂêàÈõÜ</a>  </p>
</blockquote>

<h2 id="toc_0">Business Nature</h2>

<ul>
<li>Mobile is the first priority</li>
<li>Stable backend model, flexible frontend presentation</li>
<li>High Stability for business</li>
</ul>

<h2 id="toc_1">Frontend Architecture</h2>

<p>Below graph display the history of frontend architecture in Ant Financial.<img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-04%20%E4%B8%8B%E5%8D%889.10.29.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-04 ‰∏ãÂçà9.10.29"/></p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-04%20%E4%B8%8B%E5%8D%8810.26.07%20-%20translated.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-04 ‰∏ãÂçà10.26.07 - translated"/></p>

<p>The frontend needs to be served in multiple channels. Not only traditional web UI, but also Little Program/H5 in various apps.  Below graph introduces you how Ant Finance releases its change from source code to production.</p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8810.07.13.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà10.07.13"/></p>

<p>How to process offline H5 page</p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8810.10.21.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà10.10.21"/></p>

<p>It‚Äôs quite important these years to provide your service In-App. We have two ways channel (In China - Lawrence):<br/>
1. Little Program<br/>
Lightweight HTML app designs for running inside giant app like Wechat, Taobao, Alipay. Very similar to PWA. Little Program can access native function like using camera which Wechat will be a bridge  for that.<br/>
2. H5<br/>
H5 stands for HTML 5 web page. When people compare it with Little Program, H5 represents the HTML 5 web app which will be loaded by WebView(embedded browser in native app).</p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8810.20.22.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà10.20.22"/></p>

<p>Below image shows the differences of development for H5, Little Program and PC Web Page.</p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8810.40.24.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà10.40.24"/></p>

<p>As the business grows, it‚Äôs a big challenge to develop the service. In a tradition frontend architecture model, UX API changes frequently, however service API is stable relatively. The question is, our API should be UI-oriented or should be generic.</p>

<p>And the answer is, Backend For Frontend(aka BFF).<br/>
<img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8810.46.57.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà10.46.57"/></p>

<p>In a tradition model, we basically have 3 layers: UI, business service, then infrastructure. <br/>
In BFF model, we still have 3 layers, the differences are:<br/>
In the 2nd layer, now we have BFFs which are designed for UI. BFF provides  API that perfectly fit to UI. And we can have multiple BFF services designed for individual clients.<br/>
In the 3rd layer, we move Business Layer down. We treat Business Layer as some kind of infrastructure that provides generic business API. </p>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-05%20%E4%B8%8B%E5%8D%8811.44.36.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-05 ‰∏ãÂçà11.44.36"/></p>

<p>In general, frontend and BFF development are completed by the same developer. From the development of employee point of view, there are some benefits:<br/>
1. Frontend developer has the opportunity to learn server side development skills<br/>
2. Expand the scope of knowledge<br/>
3. Improve communication skills<br/>
4. More reasonable division of labor</p>

<blockquote>
<p>Following content is the open source solution Ant Finance creates. I would not repeat it, instead, I will paste the url links to GitHub or official home page.  </p>
</blockquote>

<h3 id="toc_2">Egg.js</h3>

<p><a href="https://github.com/eggjs/egg/">GitHub - eggjs/egg: ü•ö Born to build better enterprise frameworks and apps with Node.js &amp; Koa</a><br/>
<a href="https://eggjs.org/en/index.html">egg - Born to build better enterprise frameworks and apps</a></p>

<p><a href="https://github.com/eggjs/awesome-egg">GitHub - eggjs/awesome-egg: Awesome Egg.js Web Framework and Plugin.</a></p>

<p>Egg.js is a Node.js web development framework. It provides enterprise level features to speed up the development. It‚Äôs the core to BFF.</p>

<p>It‚Äôs worth to highlight that Egg.js is not only a web framework. It‚Äôs a solution to develop, build, run, monitor and maintain your Node.js application in production environment. For example, Egg.js embeds in a security mechanism to avoid security problem systematically, we all know that developer is not trustable: <a href="https://eggjs.org/en/core/security.html">Security - Born to build better enterprise frameworks and apps</a>.<br/>
And Egg.js provides a solution to run application in cluster:<br/>
<a href="https://eggjs.org/en/advanced/cluster-client.html">Multi-Process Development Model Enhancement - Born to build better enterprise frameworks and apps</a>.</p>

<p>Worth to have a look even if you‚Äôre not a fan to Egg.js itself.</p>

<h3 id="toc_3">sofa-rpc and sofa-rpc-node</h3>

<p><a href="https://github.com/alipay/sofa-rpc">GitHub - alipay/sofa-rpc: SOFARPC is a high-performance, high-extensibility, production-level Java RPC  framework.</a></p>

<p><a href="https://github.com/alipay/sofa-rpc-node">GitHub - alipay/sofa-rpc-node: SOFARPC Node is a high-performance, high-extensibility, production-level Nodejs RPC framework.</a></p>

<ul>
<li>Supports multiple language</li>
<li>Automated serialization and deserialization</li>
<li>Transparent to developer to call JavaScript from Java or call Java from JavaScript</li>
<li>Support ProtoBuf and Hessian</li>
</ul>

<h2 id="toc_4">High Quality Development</h2>

<h3 id="toc_5">Development Steps</h3>

<p><img src="media/15415136154959/%E2%80%9C%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-06%20%E4%B8%8B%E5%8D%889.19.13%E2%80%9D%E7%9A%84%E5%89%AF%E6%9C%AC.png" alt="‚ÄúÂ±èÂπïÂø´ÁÖß 2018-11-06 ‰∏ãÂçà9.19.13‚ÄùÁöÑÂâØÊú¨"/></p>

<h3 id="toc_6">Development Management</h3>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-06%20%E4%B8%8B%E5%8D%889.44.18.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-06 ‰∏ãÂçà9.44.18"/></p>

<h3 id="toc_7">Change Management</h3>

<ul>
<li>Should be able to <strong>gated launch</strong></li>
<li>Should be able to <strong>monitor</strong></li>
<li>Should be able to <strong>roll back</strong>
<img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-06%20%E4%B8%8B%E5%8D%889.49.18.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-06 ‰∏ãÂçà9.49.18"/></li>
</ul>

<h3 id="toc_8">Monitor</h3>

<h4 id="toc_9">Backend Monitor</h4>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-06%20%E4%B8%8B%E5%8D%889.56.02.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-06 ‰∏ãÂçà9.56.02"/></p>

<h4 id="toc_10">Frontend Monitor</h4>

<p><img src="media/15415136154959/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-11-06%20%E4%B8%8B%E5%8D%889.56.53.png" alt="Â±èÂπïÂø´ÁÖß 2018-11-06 ‰∏ãÂçà9.56.53"/></p>

		</div>
	</article>
	<div class="share-comment">
	 <!-- Â§öËØ¥ËØÑËÆ∫Ê°Ü start -->
	<div class="ds-thread"></div>
<!-- Â§öËØ¥ËØÑËÆ∫Ê°Ü end -->
<!-- Â§öËØ¥ÂÖ¨ÂÖ±JS‰ª£Á†Å start (‰∏Ä‰∏™ÁΩëÈ°µÂè™ÈúÄÊèíÂÖ•‰∏ÄÊ¨°) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"lawrenceching"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Â§öËØ¥ÂÖ¨ÂÖ±JS‰ª£Á†Å end -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57304811-3', 'auto');
  ga('send', 'pageview');

</script>

	  

	  

	</div>
</div>        </div>
			<footer id="footer" class="inner">Copyright &copy; 2018
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a> &nbsp;&nbsp; 
<a href="www.miitbeian.gov.cn" target="_blank">Á≤§ICPÂ§á15018861Âè∑</a>
      </footer>
		</div>
	</div>

  
    


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57304811-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
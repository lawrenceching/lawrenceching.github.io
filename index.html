<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	IMLC.ME
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="IMLC.ME" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}
	</style>
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
					<div class="profilepic">
						<img src="asset/icon.jpg" style="width:160px;">
					</div>
					<h1><a href="index.html">IMLC.ME</a></h1>
					<p class="subtitle"></p>
					<nav id="main-nav">
						<ul class="main">
							<li><a href="index.html">Home</a></li>
						    <!-- <li><a href="all.html">Blog</a></li>-->	
						    <li><a href="archives.html">Archives</a></li>
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">

<!-- 
			<a class="email" href="mailto:" title="Email">Email</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
			<a class="google" href="https://plus.google.com/" rel="author" title="Google+">Google+</a>
			<a class="twitter" href="http://twitter.com/" title="Twitter">Twitter</a>
			<a class="github" href="https://github.com/" title="GitHub">GitHub</a>
			<a class="coderwall" href="https://coderwall.com/" title="Coderwall">Coderwall</a>
		    <a class="stackoverflow" href="http://stackoverflow.com/users/" title="StackOverflow"></a>
			<a class="linkedin" href="http://www.linkedin.com/in/" title="LinkedIn">LinkedIn</a>
			<a class="pinterest" href="https://pinterest.com/" title="Pinterest">Pinterest</a>
			<a class="delicious" href="http://delicious.com/" title="Delicious">Delicious</a>
			<a class="pinboard" href="https://pinboard.in/u:" title="Pinboard">Pinboard</a>
			<a class="douban" href="https://www.douban.com/people/" title="Douban">Douban</a>
			<a class="quora" href="https://quora.com/" title="Quora">Quora</a>
			<a class="instagram" href="https://instagram.com/" title="Instagram">Instagram</a>
			<a class="behance" href="https://www.behance.net/" title="Behance">Behance</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
								<a class="twitter" href="http://twitter.com/" title="Twitter">Twitter</a>
								<a class="github" href="https://github.com/" title="GitHub">GitHub</a>
-->	
								

								<a class="rss" href="atom.xml" title="RSS">RSS</a>
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">
			<div class="mid-col-container"> <div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-05-16T16:28:59+08:00" itemprop="datePublished">2016/5/16</time>
			</div>
			
			 
			
		</div>
		<h1 class="title" itemprop="name"><a href="hotkey-to-launch-apps.html" itemprop="url">
		[OS X] 使用 Alfred 快捷键打开应用程序</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>写着写着代码，终于忍受不了在Xcode、Emulator、Chrome、Dash等应用中切来切去的麻烦。Dock栏可不是那么好点的。于是花了一段时间查找Mac上有哪些App可以实现快捷键切换应用程序。<br/>
最后，终于挑定了一款应用的时候，突然想起来 Alfred 来。于是尝试了一下，效果完美。</p>

<p><strong>Alfred 无愧神器之名：）</strong></p>

<hr/>

<h5 id="toc_0">Step 1: Create Blank Workflow</h5>

<p>Add a blank workflow, fill the name, description and other field Alfred required.</p>

<h5 id="toc_1">Step 2: Add Hotkey Trigger</h5>

<p>Click the &ldquo;+&rdquo; button on the upper right, select the Trigger -&gt; Hotkey. Now a new window shows, type the Hotkey you want to use.</p>

<h5 id="toc_2">Step 3: Add Action</h5>

<p>Click the &ldquo;+&rdquo; button, this time select the Action -&gt; Launch Apps/ Files. Drop the app you want to open from Finder to Alfred.</p>

<h5 id="toc_3">Step 4: Link the Trigger to the Action</h5>

<p>Link the hotkey trigger to the launch apps action. Done!</p>

<p><img src="http://7xt24f.com1.z0.glb.clouddn.com/2016-05-16-14633883160356.jpg" alt="A workflow to trigger the chrome and xcode"/></p>

<p>最终效果是，在 Chrome 还没有打开的情况下，将启动 Chrome。如果 Chrome 已经启动，则切换到 Chrome。</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-05-07T00:52:55+08:00" itemprop="datePublished">2016/5/7</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='iOS.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="swift-convert-custom-class-to-nsdata.html" itemprop="url">
		[Swift] Convert custom class to NSData</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>It&rsquo;s necessary to convert custom object to NSData when using NSUserDefaults or NSKeyedArchiver. Furthermore, a dictionary or an array with custom class.</p>

<p>Here shows steps to do it.</p>

<h5 id="toc_0">1. Define your class</h5>

<pre><code>class Book: NSObject, NSCoding {
    var id:Int
    var name:String?
    var author:String?
    
    private static let KeyId = &quot;key_id&quot;
    private static let KeyName = &quot;key_name&quot;
    private static let KeyAuthor = &quot;key_author&quot;
    
    init(id: Int){
        self.id = id
    }
    
    required init? (coder aDecoder: NSCoder){
        self.id = aDecoder.decodeIntegerForKey(Book.KeyId)
        self.name = aDecoder.decodeObjectForKey(Book.KeyName) as? String
        self.author = aDecoder.decodeObjectForKey(Book.KeyAuthor) as? String
    }
    
    func encodeWithCoder(aCoder: NSCoder) {
        aCoder.encodeInteger(id, forKey: Book.KeyId)
        aCoder.encodeObject(name, forKey: Book.KeyName)
        aCoder.encodeObject(author, forKey: Book.KeyAuthor)
    }
}
</code></pre>

<p>You must extend your class from NSObject and implement the NSCoding protocal. Thus, you get <code>init(coder:)</code> and <code>encodeWithCoder(aCode:)</code></p>

<h5 id="toc_1">2. Save data</h5>

<pre><code>let book = Book(id: 1)
book.name = &quot;The first book&quot;
book.author = &quot;IMLC.ME&quot;

let book2 = Book(id:2)
book.name = &quot;The second book&quot;
book.author = &quot;IMLC.ME&quot;

let books = [book, book2]

let ud = NSUserDefaults.standardUserDefaults()
ud.setObject(NSKeyedArchiver.archivedDataWithRootObject(book), forKey: &quot;book&quot;)
ud.setObject(NSKeyedArchiver.archivedDataWithRootObject(book), forKey: &quot;book-array&quot;)
</code></pre>

<p>The code above shows how to save <code>book</code> and <code>books</code> (an array) into NSUserDefaults.</p>

<h5 id="toc_2">3. Restore data</h5>

<pre><code>if let bookData = ud.objectForKey(&quot;book&quot;) as? NSData,
    let bookArrayData = ud.objectForKey(&quot;book-array&quot;) as? NSData{
    let restoredBook = NSKeyedUnarchiver.unarchiveObjectWithData(bookData) as? Book
    let restoredBookArray = NSKeyedUnarchiver.unarchiveObjectWithData(bookArrayData) as? [Book]
    
    print(&quot;Restored book \(restoredBook.name!) and book array [\(restoredBookArray[0].name!),\(restoredBookArray[1].name!)]&quot;)
}
</code></pre>

<hr/>

<p>Saving and loading data with swift dictionary is very similar to array, I wouldn&rsquo;t give an another sample here.</p>

<p>TAG: Swift, NSData, Convert, Custom class</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-25T03:02:10+08:00" itemprop="datePublished">2016/4/25</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='Android.html'>Android</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="536.html" itemprop="url">
		MX4 PRO 无法连接 adb 问题的解决办法</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>死坑死坑，新买的手机竟然不能用来调试。今天终于被我查到解决办法了（应该说终于有大神写的解决办法被收录然后被我查到了）。<br/>
ps:本解决办法同样适用于 MX4 &amp; 魅蓝</p>

<p>在 Mac 下，修改 adb_usb.ini 文件（Mac 是在/Users/[username]/.android/adb_usb.ini 目录下，username 即是你的用户名；Windows 是在/Users/user/.android 目录下），往里面添加新的一行<br/>
<strong>0x2a45</strong><br/>
<img src="http://7xt24f.com1.z0.glb.clouddn.com/2016-04-25-adb_usb.ini.png" alt="adb_usb.ini"/></p>

<p>保存退出。<br/>
在命令行下依次输入：</p>

<pre><code>adb kill-server
adb devices
</code></pre>

<p>这时会显示<br/>
<img src="http://7xt24f.com1.z0.glb.clouddn.com/2016-04-25-terminal_adb_devices.png" alt="terminal_adb_devices"/></p>

<p>此时，adb 识别到手机，但是提示未认证。<br/>
在点亮手机屏幕的情况下，用 adb 连接手机，手机会提示你认证这台电脑，确认即可。<br/>
 <br/>
如果输入 adb 显示 command not found，这表示你的Mac 上未配置 adb 环境变量。<br/>
可以参考<a href="/532.html">我的另一篇博文</a>进行配置。<br/>
 <br/>
参考：<br/>
<a href="http://blog.csdn.net/wispy316/article/details/43022349">wispy316的专栏</a></p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-25T02:57:30+08:00" itemprop="datePublished">2016/4/25</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='Android.html'>Android</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="532.html" itemprop="url">
		Mac ADB 环境变量配置</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h3 id="toc_0">1. 记录 adb 所在目录位置</h3>

<p> 记住自己adb 程序的目录位置，如在我的电脑中是：/Users/android-sdk-macosx/platform-tools/</p>

<h3 id="toc_1">2. 创建 .bash_profile 文件</h3>

<p> terminal 中输入</p>

<pre><code>touch .bash_profile
</code></pre>

<h3 id="toc_2">3. 打开 .bash_profile 文件</h3>

<pre><code>open -e .bash_profile
</code></pre>

<p>该命令会自动打开文本编辑器。</p>

<p>(1) 如果你发现里面已经有内容了，请在 PATH 后面添加  </p>

<p><code>:/Users/android-sdk-macosx/platform-tools/</code>  </p>

<p>包括最前面的英文状态下的冒号。如果 PATH 后面的路径被双引号括了起来，那么请把上面这句添加到双引号的里面。</p>

<p>(2) 如果你打开的文件是空白的，请输入<br/><br/>
 <code>export PATH=${PATH}:/Users/android-sdk-macosx/platform-tools/</code>  </p>

<p>保存后关闭。</p>

<h3 id="toc_3">4. 添加环境变量</h3>

<pre><code>source .bash_profile
</code></pre>

<h3 id="toc_4">5. 在终端输入 adb，在设置正常的情况下会弹出一大堆的adb 使用提示。</h3>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-24T13:57:10+08:00" itemprop="datePublished">2016/4/24</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='JavaScriptAndJQuery.html'>JavaScript/JQuery</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="save-load-object-in-localStorage.html" itemprop="url">
		Save and load object in localStorage</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>As for the reason only string can be stored in localStorage, an object need to be converted to string format (JSON text).</p>

<h3 id="toc_0">Save object</h3>

<pre><code>var books = [{id:3, name:&quot;From Zero To One&quot;}, {id:4, name:&quot;Head First Java&quot;}];
localStorage.setItem(&quot;books&quot;, JSON.stringify(books));
</code></pre>

<h3 id="toc_1">Load object</h3>

<pre><code>var booksJSON = localStorage.getItem(&quot;books&quot;);
if( booksJSON == null ){
    // No data stored in the localStorage
    return;
}
var books = JSON.parse(booksJSON);
for(var i=0; i &lt; books.length; ++i) {
    var book = books[i];
    var id = book.id;
    var name = book.name;
}

</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-22T17:31:02+08:00" itemprop="datePublished">2016/4/22</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='JavaScriptAndJQuery.html'>JavaScript/JQuery</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="javascript-an-approach-of-class-definition.html" itemprop="url">
		JavaScript 定义 class 的一种解决方案</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>这是由荷兰程序员 Gabor de Mooij 提出的一种比较简单的方法。Gabor de Mooij 称之为 minimalist approach。现摘录如下：</p>

<h5 id="toc_0">定义一个 Foo 类</h5>

<pre><code>var Foo = {
    createNew: function(){
        var instance = {};
        instance.description = &quot;A new class instance&quot;;
        instance.bar = function() { console.log(instance.description)};
        return instance;
    }
}
</code></pre>

<h5 id="toc_1">创建一个 Foo 实例</h5>

<pre><code>var foo = Foo.createNew();
foo.bar();
</code></pre>

<h5 id="toc_2">类的继承</h5>

<pre><code>var NewFoo = {
    createNew = function(){
        var instance = Foo.createNew();
        instance.title = &quot;A new title&quot;;
        instance.newBar = function(){
            alert(instance.description);
        };
    }
}
</code></pre>

<h5 id="toc_3">私有方法和属性</h5>

<pre><code>var Foo = {
    createNew: function(){
        var instance = {};
        instance.description = &quot;A new class instance&quot;; //description 是私有的，只有通过 bar() 来访问
        instance.bar = function() { console.log(instance.description)};
        return instance;
    }
}
</code></pre>

<h5 id="toc_4">静态成员变量</h5>

<pre><code>var Foo = {
    id: 101010; // id 在多个实例间共享
    createNew: function(){
        var instance = {};
        instance.description = &quot;A new class instance&quot;; //description 是私有的，只有通过 bar() 来访问
        instance.bar = function() { console.log(instance.description)};
        return instance;
    }
}

var foo1 = Foo.createNew();
var foo2 = Foo.createNew();
foo2.id = 233333;
console.log(&quot;Foo id:&quot;+foo1.id);

</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-18T12:00:18+08:00" itemprop="datePublished">2016/4/18</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='Android.html'>Android</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="593.html" itemprop="url">
		Android Studio 更新 Android 6.0 之后无法找到 org.apache.http 包的问题</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>这么重要的问题竟然没有事先说明，太过分了。<br/>
今天更新了 Android 6.0 的 SDK 后发现项目一片红，吓尿了。<br/>
直接引用把：<a href="http://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-apache-http-client">http://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-apache-http-client</a><br/>
Android 6.0 release removes support for the Apache HTTP client. If your app is using this client and targets Android 2.3 (API level 9) or higher, use the <a href="http://developer.android.com/reference/java/net/HttpURLConnection.html">HttpURLConnection</a> class instead. This API is more efficient because it reduces network use through transparent compression and response caching, and minimizes power consumption. To continue using the Apache HTTP APIs, you must first declare the following compile-time dependency in your <strong>build.gradle</strong> file:</p>

<pre><code>android {
    useLibrary &#39;org.apache.http.legacy&#39;
}
</code></pre>

<p>大概意思就是，Android 6.0不再支持 Apache HTTP client。 请使用 <a href="http://developer.android.com/reference/java/net/HttpURLConnection.html">HttpURLConnection</a> 代替。想要继续使用 Apache HTTP client 的，请添加如上代码。</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-18T11:55:50+08:00" itemprop="datePublished">2016/4/18</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='Android.html'>Android</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="596.html" itemprop="url">
		MX4 PRO DDMS 无法访问data文件夹</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<ol>
<li><p>开启手机的Root权限。（开放Root权限会失去保修，慎重考虑）</p></li>
<li><p>在 Terminal 下定位到 sdk/platform-tools 文件夹下，运行</p></li>
</ol>

<pre><code>su
chmod 777 /data
</code></pre>

<p>因为 adb shell 的无法添加-R参数递归修改权限，所以用adb必须要一级一级文件夹修改权限，而且&hellip;我运行chmod后提示“Unable to chmod /data: Operation not permitted ”。所以..</p>

<ol>
<li>下载 Root Explorer，直接递归修改整个/data文件夹， done!</li>
</ol>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-17T13:11:38+08:00" itemprop="datePublished">2016/4/17</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='iOS.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="600.html" itemprop="url">
		Imports TSMessages into Swift project</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>Following the document of TSMessages, I meet a trouble:<br/>
Could not read TSMessages config file from main bundle with name<br/>
As mentioned on the page GitHub issue, I fixed the first trouble I met.<br/>
Change pod file to:</p>

<pre><code>pod &#39;TSMessages&#39;, :git =&gt; &#39;https://github.com/KrauseFx/TSMessages.git&#39;
</code></pre>

<p>The problem has been fixed in the master branch but the author do not commit it to Pod yet.<br/>
 <br/>
The second problem is that the easiest way to use TSMessages do not works.</p>

<pre><code>[TSMessage showNotificationWithTitle:@&quot;Your Title&quot;
                                subtitle:@&quot;A description&quot;
                                    type:TSMessageNotificationTypeError];
</code></pre>

<p>in swift:</p>

<pre><code>TSMessage.showNotificationWithTitle(&quot;Title&quot;, subtitle:&quot;subtitle&quot;, type:TSMessageNotificationType.Error)
</code></pre>

<p>Do nothing on my project.<br/>
I has to use an another method and it works fine.</p>

<pre><code>TSMessage.showNotificationInViewController(self, title: &quot;Title&quot;, subtitle: &quot;Subtitle&quot;, type: TSMessageNotificationType.Error)
</code></pre>

<p>I do not figure it out why.</p>

<p>TAG: iOS, TSMessages, Swift</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-17T00:56:36+08:00" itemprop="datePublished">2016/4/17</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='paperreference.html'>论文参考文献生成工具</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="reference-generator.html" itemprop="url">
		论文参考文献生成工具</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>本工具根据 GB/T 7714-2005 的说明生成参考文献条目。<br/>
目前项目源代码托管在 <a href="https://coding.net/u/lawrenceching/p/reference-generator/git">Coding.net</a> 上。尚处于开发阶段。</p>

<p>如果有什么问题可以直接到 Coding.net 上留言。</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-04-16T23:52:11+08:00" itemprop="datePublished">2016/4/16</time>
			</div>
			
			 
			
		</div>
		<h1 class="title" itemprop="name"><a href="605.html" itemprop="url">
		Java Integer 缓存机制的小坑点</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>Integer 是 Java 5 引入的新特性，该特性能节省内存和改善性能。同样被引入缓存机制的还有 Byte，Short，Long，Character，缓存范围都是在 [-128,127] （Character是在[0,127]）之间。</p>

<p>但是有几点需要注意的是：<br/>
1. 对 Integer 对象引入了 IntegerCache 类，其他封装类型也有对应的 XxxCache。<br/>
2. 该缓存特性只有在 autoboxing 过程中使用，换言之，使用 constructor 创建的 Integer 并不能被缓存。<br/>
3. 因为缓存机制的存在，在缓存范围内的对象都来自同一个缓存。带来的副作用是使用“==”地址比较运算符比较两个看似不一样的对象，得到的是 true。网上其他文章的说法是因而可以使用 == 来比较直接比较两个对象的值。但我觉得这样理解容易造成偏差。Java 规范并没有约定 [-128,127] 的范围内 == 用作值比较，这只是一个副作用。<br/>
4. 只有 Integer 对象可以通过指定 JVM 启动参数来修改缓存上限。</p>

<pre><code>-XX:AutoBoxCacheMax=size
</code></pre>

<p>所以说写代码的时候还是不要把==用作值比较。<br/>
 <br/>
老实说这个缓存特性带来的不一致性要是导致了什么BUG实在很难排查。当用了这个特性写了点什么之后，难保后来者不会产生迷惑。所以日常编码中还是尽量避开这个点。<br/>
 <br/>
简单到爆的实验代码：<br/>
简单地验证Java Integer缓存特性</p>

<pre><code>import com.sun.istack.internal.NotNull;
 
/**
 * Created by Lawrence on 15/11/9.
 */
public class Main {
    public static void main(String[] argv){
        Integer int1 = 100;
        Integer int2 = 100;
 
        if(int1==int2){
            print(&quot;int1 is equal to int2&quot;);
        } else {
            print(&quot;int1 is not equal to int2&quot;);
        }
        // prints &quot;int1 is equal to int2&quot;
 
        Integer int3 = 2333;
        Integer int4 = 2333;
 
        if(int3==int4){
            print(&quot;int3 is equal to int4&quot;);
        } else {
            print(&quot;int3 is not equal to int4&quot;);
        }
        // prints &quot;int3 is not equal to int4&quot;
 
        Integer int5 = 100;
        Integer int6 = new Integer(100);
 
        if(int5==int6){
            print(&quot;int5 is equal to int6&quot;);
        } else {
            print(&quot;int5 is not equal to int6&quot;);
        }
        // prints &quot;int5 is not equal to int6&quot;
    }
 
    public static void print(String str){
        System.out.println(str);
    }
 
}
</code></pre>


			
			
		</div>

	</article>
  

</div>
<nav id="pagenavi">
	 
	
	<div class="center"><a href="archives.html">Blog Archives</a></div>

</nav>

</div>



        </div>
			<footer id="footer" class="inner">Copyright &copy; 2014
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
      </footer>
		</div>
	</div>

<script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57304811-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
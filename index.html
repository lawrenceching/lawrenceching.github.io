<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>
	
  	IMLC.ME
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="IMLC.ME" type="application/atom+xml">
	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>

	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	#projects-nav {margin-left: 10px;}
	#projects-nav li {
		list-style: none;
	}

	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}

	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}
	</style>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
				 
				 	<div class="profilepic">
						<img src="/asset/icon.jpg" style="width:160px;">
					</div>
            	

					<h1><a href="index.html">IMLC.ME</a></h1>
					<p class="subtitle"></p>
					<nav id="main-nav">
						<ul class="main">
						
						  <li id=""><a target="self" href="index.html">Home</a></li>
						
						  <li id=""><a target="_self" href="archives.html">Archives</a></li>
						
						</ul>
					</nav>

					<nav>
						My Projects
						<ul id="projects-nav">
							<li><a target="_blank" href="https://gitlab.com/lawrence.ching/statichere"> - statichere</a></li>
							<li><a target="_blank" href="http://Framework7vue-zse.imlc.me/kitchen-sink/"> - Framework7 Vue ZSE</a></li>
							<li><a target="_blank" href="http://zira.imlc.me"> - Zira</a></li>
							<li><a target="_blank" href="https://github.com/lawrenceching/clipper"> - Clipper</a></li>
							<li><a target="_blank" href="http://www.imlc.me/worldclock/"> - World Clock</a></li>
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">










<a target="_blank" class="github" target="_blank" href="https://github.com/lawrenceching" title="GitHub">GitHub</a>




								<a class="rss" href="atom.xml" title="RSS">RSS</a>

						</div>
					</nav>
				</header>
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
 <div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-05-02T20:47:19+08:00" itemprop="datePublished">2018/5/2</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='javascript.html'>JavaScript</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="note-a-debugging-of-vue-js-v-if.html" itemprop="url">
		Note a debugging of Vue.js v-if</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>Today my workmate hit an issue that v-if didn&#39;t work for him.<br/>
It turned out that Vue.js can&#39;t watch the property that you do not define at the beginning.</p>

<h2 id="toc_0">Root Cause</h2>

<p>It&#39;s not only relative to v-if. It impact all functions that used two-way data binding.</p>

<p>On below demo, we have two section that both of them hope to change content by button clicking. Section 1 works good but section 2 didn&#39;t.</p>

<p>It&#39;s because section2 object(in js) doesn&#39;t define content property.<br/>
So after Vue runs up, the new property that you add afterward can&#39;t be watched by Vue. And then you will fine your change will not reflect to web page even if you change the value of the property.</p>

<p>In this demo, I tried to change the content of section 2 but it didn&#39;t work. In my workmate&#39;s case, it change the value of a property but v-if was not triggered.</p>

<p>Live Demo: <a href="https://jsfiddle.net/Lawrence/7eq3y5uv/">https://jsfiddle.net/Lawrence/7eq3y5uv/</a><br/>
<iframe src="https://jsfiddle.net/Lawrence/7eq3y5uv/embedded/" width="800px" height="500px"><br/>
</iframe></p>

<h2 id="toc_1">Look Deeper</h2>

<p>When Vue.js starts, it will convert all data into observable. The key is how Vue.js do that here.</p>

<p>Vue.js will bind <code>Watcher</code> on each properties of an object by defining <code>set</code> method using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty</a>. Therefore Vue.js can get updated if you change the value.</p>

<p>Apparently, if you don&#39;t define an property for an object at the beginning, Vue.js can&#39;t watch it.</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-04-06T23:25:13+08:00" itemprop="datePublished">2018/4/6</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='java.html'>Java</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="15230283138027.html" itemprop="url">
		Hello Spring Actuator</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2 id="toc_0">Start Up The Service</h2>

<h2 id="toc_1">Customize Health Check</h2>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-04-05T00:45:33+08:00" itemprop="datePublished">2018/4/5</time>
			</div>
			
			 
			
		</div>
		<h1 class="title" itemprop="name"><a href="15228603330284.html" itemprop="url">
		来自阿里云云栖社区的 ElasticSearch 原理剖析</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>这是一系列来自阿里的 ElasticSearch 的原理剖析文章。文章质量优秀，干货十足。</p>

<p>一是 ES 是非常流行的分布式搜索引擎，不管是日常运维还是生产环境都非常实用。<br/>
二是 ES 也是一个典型的分布式系统。分布式系统避不开的集群、服务发现、Master 选举等话题在此系列文章中都有涉及。如果想了解如何开发一个高可用，可伸缩的分布式系统，ES 也是一个很好的例子。</p>

<p><a href="https://zhuanlan.zhihu.com/p/35291900">Elasticsearch分布式一致性原理剖析(一)-节点篇</a></p>

<p><a href="https://zhuanlan.zhihu.com/p/35294658">Elasticsearch分布式一致性原理剖析(二)-Meta篇</a></p>

<p><a href="https://zhuanlan.zhihu.com/p/35299145">Elasticsearch分布式一致性原理剖析(三)-Data篇</a></p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-03-21T23:24:15+08:00" itemprop="datePublished">2018/3/21</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='java.html'>Java</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="remote-debugging-for-java-application.html" itemprop="url">
		Remote Debugging for Java Application</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>It&#39;s an important feature that JVM provided and I&#39;m so surprised that I used it at the first time today.</p>

<h2 id="toc_0">How to enable remote debugging</h2>

<p>To enable it, you will just need to add below JVM arguments in command line:</p>

<pre><code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
</code></pre>

<p>Then you can use your debugger to attach to remote JVM.</p>

<p><code>suspend</code> is quite useful argument here. If <code>suspend</code> is <code>y</code>, JVM will suspend before main class is loaded until debugger attach to it. <code>n</code> otherwise. </p>

<p>So set <code>suspend</code> to <code>y</code> if you need to debug application initialization phase.</p>

<p><a href="https://docs.oracle.com/javase/7/docs/technotes/guides/jpda/conninv.html">Check Official Document for detailed introduction</a></p>

<h2 id="toc_1">Remote Debugging in IntelliJ IDEA</h2>

<p>I believe all IDEs have that function to debug Java application remotely. I use IntelliJ here for demonstration.</p>

<p><img src="media/15216458555103/Remote%20Debug%20Configuration%20in%20IntelliJ.png" alt="Remote Debug Configuration in IntelliJ"/><br/>
Add a new configuration under Remote category, you will see IntelliJ provides command line arguments for you. That&#39;s exactly what I show in previous section.</p>

<p>Change the host to your server&#39;s url, and launch your application with remote debug arguments, then you can debug as what you did on debugging local application.</p>

<h1 id="toc_2">DO NOT REMOTE DEBUG YOUR PRODUCTION APPLICATION</h1>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-02-24T22:28:33+08:00" itemprop="datePublished">2018/2/24</time>
			</div>
			
			 
			
		</div>
		<h1 class="title" itemprop="name"><a href="what-is-cherry-pick.html" itemprop="url">
		What is Cherry-Pick</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>I confused for so long that what Cherry-Pick is. And today I got some times to learn it.</p>

<h2 id="toc_0">What Cherry-Pick can do</h2>

<p>Cherry-Pick can pick some commits from other branch, merge into your current working branch.</p>

<h2 id="toc_1">Use Cases</h2>

<ul>
<li><p>If you&#39;re working on a dev branch. You have not yet complete your task but there are change committed. And now you need to merge part of you work into master for some reason but you don&#39;t want to merge the dev branch into master. And now you can cherry pick the commits that just you need, and merge them into master.</p></li>
<li><p>If you merge your commit into wrong branch. And now you need to merge you change into master. You can cherry pick you change and merge into master branch. Then revert your change into that wrong branch.</p></li>
</ul>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2018-02-24T18:25:13+08:00" itemprop="datePublished">2018/2/24</time>
			</div>
			
			 
			
		</div>
		<h1 class="title" itemprop="name"><a href="15194679139964.html" itemprop="url">
		Docker is a good way to manage our services</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>Many years ago I have heard that docker is an amazing stuff to manage the build, deployment and service life cycle. But at that time, there were also some bad news on security that prevented me from trying it.</p>

<p>And today I finally found a day to play with it. The result is, Docker is a amazing thing to manage my service. It exactly fix my problem that this years I&#39;m trying to improve and contributing to my business.</p>

<h2 id="toc_0">Service Isolation</h2>

<p>Docker will create individual VM to serve each services. Most of OS resource are isolated so that dev doesn&#39;t need to care about the system resource(at least less care about it). Also we can keep clean codebase without system specified logic.</p>

<p>In my company we run services in several hosts shared to different teams. It&#39;s not a frequent case but also annoying that different services will try to use same port, will try to user different JDK version on the path, will need to change same environment variable.</p>

<p>Some service change those share resource dynamically and leads to random failures/issues that hard to locate.</p>

<p>In this scenario, Docker may be one of solutions.</p>

<h2 id="toc_1">Unified Stander to Deploy Services</h2>

<p>DevOps requires less manual work on our build, test, release process. All stuffs should be able to automatically proceed. It absolutely is a good idea. When we serve our system in a large scale and cooperate with so much teams, more manual work we need, much risk we introduce. No one want to stick in fire-fight at mid night. And Docker provide a unified stander to manage service&#39;s resource and environment. That means, we are easily to write automatic process for build, for test and for deployment.</p>

<p>The company I work on has its own solution to manage resource and do things automatically. We have huge set of scripts and softwares to setup dev environment, setup build agents for TeamCity and Jenkins, to deploy application, to verify or monitor the function we provide.<br/>
They are awesome, they have provided huge value to business. But it&#39;s customized. New engineers are hard to understand the ecosystem.</p>

<p>I think Docker is good way to reduce the learning cost because of aligned style to  manage resource </p>

<h2 id="toc_2">Scalability</h2>

<p>It&#39;s the most well-known feature for Docker, no need more words to admire it.</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2017-09-25T22:03:13+08:00" itemprop="datePublished">2017/9/25</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='java.html'>Java</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="15063481937597.html" itemprop="url">
		How to serve one jersey resource or jetty servlet for different path</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>Today I&#39;m trying to make an endpoint accessible in different paths. Such as I can go to <code>http://localhost/</code> and <code>http://localhost/hello</code> for a same hello message. </p>

<p>I do got some solutions.</p>

<p>I&#39;m using Jersey over Jetty. But whether or not  you&#39;re using Jetty servlet or writing Jersey Resource, I think you will get some ideas.</p>

<p>Ps: I copy the code from my GitLab Snippets and will keep it update. So If you find something wrong, pls comment in GitLab</p>

<h3 id="toc_0">Using the regular expression in Jersey Resource</h3>

<p><a href="https://gitlab.com/snippets/1676612">https://gitlab.com/snippets/1676612</a></p>

<pre><code class="language-java">package me.imlc.example.jetty.multiplehandler;

import com.sun.jersey.spi.container.servlet.ServletContainer;
import me.imlc.example.jetty.multplehandler.HelloResource;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import org.glassfish.jersey.server.ResourceConfig;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import java.util.Objects;

import static org.junit.Assert.assertEquals;

public class RegexpResourceTest {

    private static Server server;
    private static CloseableHttpClient client = HttpClients.createDefault();

    @BeforeClass
    public static void beforeAll() throws Exception {
        ResourceConfig rc = new ResourceConfig(RegexpResource.class);

        ServletHolder holder = new ServletHolder(new ServletContainer(rc));

        server = new Server(8080);

        ServletContextHandler contextHandler = new ServletContextHandler(server, &quot;/*&quot;);
        contextHandler.addServlet(holder, &quot;/*&quot;);

        server.start();
    }


    @Test
    public void canAccessByRootPath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @Test
    public void canAccessByServicePath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/service/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @AfterClass
    public static void afterAll() throws Exception {
        if(Objects.nonNull(server)) server.stop();
        if(Objects.nonNull(client)) client.close();
    }

    @Path(&quot;/{a:(.*)|service}&quot;)
    public static class RegexpResource {
        @GET
        @Produces(MediaType.TEXT_PLAIN)
        public String hello() {
            return &quot;Hello, Lynn.&quot;;
        }
    }
}

</code></pre>

<h3 id="toc_1">Specify multiple paths for one servlet</h3>

<p><a href="https://gitlab.com/snippets/1676613">https://gitlab.com/snippets/1676613</a></p>

<pre><code class="language-java">package me.imlc.example.jetty.multiplehandler;

import com.sun.jersey.spi.container.servlet.ServletContainer;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import org.glassfish.jersey.server.ResourceConfig;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import java.util.Objects;

import static org.junit.Assert.assertEquals;

public class MultipleServletTest {

    private static Server server;
    private static CloseableHttpClient client = HttpClients.createDefault();

    @BeforeClass
    public static void beforeAll() throws Exception {
        ResourceConfig rc = new ResourceConfig(RegexpResourceTest.RegexpResource.class);

        ServletHolder holder = new ServletHolder(new ServletContainer(rc));

        server = new Server(8080);

        ServletContextHandler contextHandler = new ServletContextHandler(server, &quot;/*&quot;);
        contextHandler.addServlet(holder, &quot;/*&quot;);
        contextHandler.addServlet(holder, &quot;/service/*&quot;);

        server.start();
    }

    @Test
    public void canAccessByRootPath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @Test
    public void canAccessByServicePath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/service/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @AfterClass
    public static void afterAll() throws Exception {
        if(Objects.nonNull(server)) server.stop();
        if(Objects.nonNull(client)) client.close();
    }

    @Path(&quot;/hello&quot;)
    public static class MultipleServletResource {
        @GET
        @Produces(MediaType.TEXT_PLAIN)
        public String hello() {
            return &quot;Hello, Lynn.&quot;;
        }
    }
}

</code></pre>

<h3 id="toc_2">Serve one servlet in different context handler</h3>

<p><a href="https://gitlab.com/snippets/1676615">https://gitlab.com/snippets/1676615</a></p>

<pre><code class="language-java">package me.imlc.example.jetty.multiplehandler;

import com.sun.jersey.spi.container.servlet.ServletContainer;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.eclipse.jetty.server.Handler;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;
import org.glassfish.jersey.server.ResourceConfig;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import java.util.Objects;

import org.eclipse.jetty.server.handler.ContextHandlerCollection;

import static org.junit.Assert.assertEquals;

public class MultipleContextHandlerTest {
    private static Server server;
    private static CloseableHttpClient client = HttpClients.createDefault();

    @BeforeClass
    public static void beforeAll() throws Exception {
        ResourceConfig rc = new ResourceConfig(MultipleContextHandlerResource.class);

        ServletHolder holder = new ServletHolder(new ServletContainer(rc));

        server = new Server(8080);

        ServletContextHandler rootContext = new ServletContextHandler(server, &quot;/*&quot;);
        rootContext.addServlet(holder, &quot;/*&quot;);

        ServletContextHandler serviceContext = new ServletContextHandler(server, &quot;/service/*&quot;);
        serviceContext.addServlet(holder, &quot;/*&quot;);

        ContextHandlerCollection contextHandlerCollection = new ContextHandlerCollection();
        contextHandlerCollection.setHandlers(new Handler[]{
                rootContext, serviceContext
        });

        server.setHandler(contextHandlerCollection);

        server.start();
    }

    @Test
    public void canAccessByRootPath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @Test
    public void canAccessByServicePath() throws Exception {
        HttpGet get = new HttpGet(&quot;http://localhost:8080/service/hello&quot;);
        String content = EntityUtils.toString(client.execute(get).getEntity());
        assertEquals(content, &quot;Hello, Lynn.&quot;);
    }

    @AfterClass
    public static void afterAll() throws Exception {
        if(Objects.nonNull(server)) server.stop();
        if(Objects.nonNull(client)) client.close();
    }

    @Path(&quot;/hello&quot;)
    public static class MultipleContextHandlerResource {
        @GET
        @Produces(MediaType.TEXT_PLAIN)
        public String hello() {
            return &quot;Hello, Lynn.&quot;;
        }
    }
}

</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2017-05-06T01:20:05+08:00" itemprop="datePublished">2017/5/6</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='java.html'>Java</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="why-we-need-to-disable-trace-method-and-how-to-disable-trace-in-embedded-jetty.html" itemprop="url">
		Why we need to disable TRACE method and how to disable TRACE in Embedded Jetty</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>This page show you why we need to disable TRACE HTTP method for security reason.  And provide a sample project to show you how to disable TRACE in embedded Jetty.</p>

<h2 id="toc_0">Why we need to disable TRACE method</h2>

<p>Allowing TRACE method will leads to Cross-Site Tracking (a.k.a XST) problem. XST was found in 2003. It’s a very old topic and I can’t get any new discussion after searched in Google. But it’s good to disable TRACE for our server to avoid any redundant endpoint exposes to the danger world. </p>

<h3 id="toc_1">Avoid XST Attack</h3>

<p>As we all know, server will echo back all information when it receive TRACE request. “All information” means the cookies, the credential data and the server version etc. When user is visiting a malicious website, a hacker can read malicious data by calling a cross-site TRACE request.</p>

<h3 id="toc_2">Limit Information Expose to the World</h3>

<p>In the other case, we run an API server which user will not access by browser directly. It’s good practice to limit the information expose to the external world. Information like version may tell others which issue is ok to use to hack. If we don’t need TRACE (at lease in production environment), so disable it.</p>

<h2 id="toc_3">How to disable TRACE in Embedded Jetty</h2>

<p>By default Jetty enables TRACE  and we need to disable it manually.<br/>
This <a href="https://github.com/lawrenceching/jetty-disable-trace/blob/master/src/main/java/me/imlc/example/jetty_disable_trace/Main.java#L65">GitHub project</a> shows you how to disable TRACE for embedded Jetty.</p>

<pre><code class="language-java">private Handler wrapWithSecurityHandler(Handler h){
        Constraint disableTraceConstraint = new Constraint();
        disableTraceConstraint.setName(&quot;Disable TRACE&quot;);
        disableTraceConstraint.setAuthenticate(true);

        ConstraintMapping mapping = new ConstraintMapping();
        mapping.setConstraint(disableTraceConstraint);
        mapping.setMethod(&quot;TRACE&quot;);
        mapping.setPathSpec(&quot;/&quot;);

        // omissionConstraint is to fix the warning log &quot;&quot;null has uncovered http methods for path: /
        // No impact to disable TRACE if you do not add this constraint
        // But if you&#39;re using the monitoring tool like Geneos, and your component requires keep production monitoring all green,
        // You can try to add this omissionConstraint to fix the warning Jetty prints.
        Constraint omissionConstraint = new Constraint();
        ConstraintMapping omissionMapping = new ConstraintMapping();
        omissionMapping.setConstraint(omissionConstraint);
        omissionMapping.setMethod(&quot;*&quot;);
        omissionMapping.setPathSpec(&quot;/&quot;);


        ConstraintSecurityHandler handler = new ConstraintSecurityHandler();
        handler.addConstraintMapping(mapping);
        handler.addConstraintMapping(omissionMapping);
        handler.setHandler(h);
        return handler;
    }
</code></pre>

<p>Also notice that I wrote omissionConstraint, applied to all method to fix a warning Jetty prints:<br/>
<code>null has uncovered http methods for path: /</code></p>

<p>If you’r not required to keep production monitoring all green, you can delete this redundant constraint and accept this warning. </p>

<h6 id="toc_4">References</h6>

<p>[1] <a href="http://www.cgisecurity.com/whitehat-mirror/WH-WhitePaper_XST_ebook.pdf">CROSS-SITE TRACING (XST) - THE NEW TECHNIQUES AND EMERGING THREATS TO BYPASS CURRENT WEB SECURITY MEASURES USING TRACE AND XSS - Jeremiah Grossman</a><br/>
[2] <a href="https://www.owasp.org/index.php/Cross_Site_Tracing">Cross Site Tracing - OWASP</a><br/>
[3] <a href="http://stackoverflow.com/questions/29348328/java-embedded-jetty-is-accepting-http-trace-method">spring - Java embedded jetty is accepting HTTP TRACE method - Stack Overflow</a></p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-11-17T23:08:48+08:00" itemprop="datePublished">2016/11/17</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='others.html'>Others</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="using-remote-desktop-in-mac-in-china.html" itemprop="url">
		Mac 远程登录 Windows 10</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>在中国，使用 Windows 的远程桌面服务有两个困难。</p>

<ol>
<li>官方的 Remote Desktop Client on Mac 不在中国销售。</li>
<li>家庭版的 Windows 10 不包含远程桌面服务。</li>
</ol>

<p>解决方法是两个都找第三方解决方案。</p>

<ol>
<li>使用 Parallels Client 代替 Remote Desktop Client on Mac</li>
<li>适用 rdpwrap 提供远程桌面服务</li>
</ol>

<hr/>

<h3 id="toc_0">安装 Parallels Client</h3>

<p>Parallels Client: <a href="https://itunes.apple.com/us/app/parallels-client/id600925318?mt=12">https://itunes.apple.com/us/app/parallels-client/id600925318?mt=12</a></p>

<p>或者需要付费但是一样更好功能更加强大的 Parallels Access:<br/>
<a href="http://www.parallels.com/cn/products/access/">http://www.parallels.com/cn/products/access/</a></p>

<h3 id="toc_1">安装 rdpwrap</h3>

<p>GitHub: <a href="https://github.com/stascorp/rdpwrap">https://github.com/stascorp/rdpwrap</a></p>

<p>rdpwrap 是在家庭版 Windows 上提供远程桌买服务的一个开源项目。支持从 Windows Vista 到 Windows 10 系统。安装和使用说明请到 GitHub 主页查看。</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2016-10-03T19:47:21+08:00" itemprop="datePublished">2016/10/3</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='angular.html'>Angular</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="fix-angular2-cannot-route-the-page-after-refresh.html" itemprop="url">
		Fix angular2 can't route the page after refresh</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>It&#39;s very easy to make a mistake on Angular2 router. After refresh the page, the page to be routed to can not load successfully. Chrome console tell me that browser failed to load css resources as the path of resources is incorrect.</p>

<p>The solution is that put the <code>&lt;base href=&quot;/&quot;/&gt;</code> directly under the title tag. </p>


			
			
		</div>

	</article>
  

</div>
<nav id="pagenavi">
	 
	 <a class="next" href="all_1.html">Next</a> 
	<div class="center"><a href="archives.html">Blog Archives</a></div>

</nav>

</div>



        </div>
			<footer id="footer" class="inner">Copyright &copy; 2018
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
      </footer>
		</div>
	</div>

  
    


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57304811-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>